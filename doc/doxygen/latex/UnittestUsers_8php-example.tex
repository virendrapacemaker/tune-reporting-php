\hypertarget{UnittestUsers_8php-example}{\section{Unittest\-Users.\-php}
}

\begin{DoxyCode}
$account\_users = \textcolor{keyword}{new} Users($api\_key, $validate = \textcolor{keyword}{true});
\end{DoxyCode}



\begin{DoxyCodeInclude}
<?php\textcolor{comment}{}
\textcolor{comment}{/**}
\textcolor{comment}{ * UnittestUsers.php, Tune SDK PHPUnit Test}
\textcolor{comment}{ *}
\textcolor{comment}{ * Copyright (c) 2014 Tune, Inc}
\textcolor{comment}{ * All rights reserved.}
\textcolor{comment}{ *}
\textcolor{comment}{ * Permission is hereby granted, free of charge, to any person obtaining a copy}
\textcolor{comment}{ * of this software and associated documentation files (the "Software"), to deal}
\textcolor{comment}{ * in the Software without restriction, including without limitation the rights}
\textcolor{comment}{ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell}
\textcolor{comment}{ * copies of the Software, and to permit persons to whom the Software is}
\textcolor{comment}{ * furnished to do so, subject to the following conditions:}
\textcolor{comment}{ *}
\textcolor{comment}{ * The above copyright notice and this permission notice shall be included in}
\textcolor{comment}{ * all copies or substantial portions of the Software.}
\textcolor{comment}{ *}
\textcolor{comment}{ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR}
\textcolor{comment}{ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,}
\textcolor{comment}{ * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE}
\textcolor{comment}{ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER}
\textcolor{comment}{ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,}
\textcolor{comment}{ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN}
\textcolor{comment}{ * THE SOFTWARE.}
\textcolor{comment}{ *}
\textcolor{comment}{ * PHP Version 5.3}
\textcolor{comment}{ *}
\textcolor{comment}{ * @category  Tune}
\textcolor{comment}{ * @package   Tune\_PHP\_SDK}
\textcolor{comment}{ * @author    Jeff Tanner <jefft@tune.com>}
\textcolor{comment}{ * @copyright 2014 Tune (http://www.tune.com)}
\textcolor{comment}{ * @license   http://opensource.org/licenses/MIT The MIT License (MIT)}
\textcolor{comment}{ * @version   0.9.1}
\textcolor{comment}{ * @link      https://developers.mobileapptracking.com Tune Developer Community @endlink}
\textcolor{comment}{ *}
\textcolor{comment}{ */}

\textcolor{keyword}{namespace }Tune\(\backslash\)Unittests\(\backslash\)Management\(\backslash\)Api\(\backslash\)Account;

require\_once dirname(dirname(dirname(dirname(dirname(dirname(dirname(\_\_FILE\_\_))))))) . \textcolor{stringliteral}{"
      /lib/TuneAutoloader.php"};

use \(\backslash\)Tune\(\backslash\)Management\(\backslash\)Api\(\backslash\)Account\(\backslash\)Users;

\textcolor{keyword}{class }UnittestUsers \textcolor{keyword}{extends} \(\backslash\)PHPUnit\_Framework\_TestCase
\{\textcolor{comment}{}
\textcolor{comment}{    /**}
\textcolor{comment}{     * @ignore}
\textcolor{comment}{     */}
    \textcolor{keyword}{protected} $api\_key = null;
\textcolor{comment}{}
\textcolor{comment}{    /**}
\textcolor{comment}{     * Get API Key from environment.}
\textcolor{comment}{     */}
    \textcolor{keyword}{protected} \textcolor{keyword}{function} setUp()
    \{
        $this->api\_key = getenv(\textcolor{stringliteral}{'API\_KEY'});
    \}
\textcolor{comment}{}
\textcolor{comment}{    /**}
\textcolor{comment}{     * Test /account/users/count}
\textcolor{comment}{     */}
    \textcolor{keyword}{public} \textcolor{keyword}{function} testCount()
    \{
        $response = null;
        \textcolor{keywordflow}{try} \{
            $account\_users = \textcolor{keyword}{new} Users($this->api\_key, $validate = \textcolor{keyword}{true});

            $filter\_array = array(
                array(
                    \textcolor{stringliteral}{"column"} => \textcolor{stringliteral}{"first\_name"},
                    \textcolor{stringliteral}{"operator"} => \textcolor{stringliteral}{"LIKE"},
                    \textcolor{stringliteral}{"value"} => \textcolor{stringliteral}{"%a%"}
                ),
                \textcolor{stringliteral}{"AND"},
                array(
                    \textcolor{stringliteral}{"column"} => \textcolor{stringliteral}{"phone"},
                    \textcolor{stringliteral}{"operator"} => \textcolor{stringliteral}{"IS NOT NULL"}
                )
            );
            $response = $account\_users->count($filter\_array);

        \} \textcolor{keywordflow}{catch} ( \hyperlink{classException}{Exception} $ex ) \{
            $this->fail($ex->getMessage());
        \}

        $this->assertNotNull($response);
        $this->assertEquals(200, $response->getHttpCode());
    \}
\textcolor{comment}{}
\textcolor{comment}{    /**}
\textcolor{comment}{     * Test /account/users/find}
\textcolor{comment}{     */}
    \textcolor{keyword}{public} \textcolor{keyword}{function} testFind()
    \{
        $response = null;
        \textcolor{keywordflow}{try} \{
            $account\_users = new \(\backslash\)Tune\(\backslash\)Management\(\backslash\)Api\(\backslash\)Account\(\backslash\)Users($this->api\_key, $validate = \textcolor{keyword}{false});

            $filter\_array = array(
                array(
                    \textcolor{stringliteral}{"column"} => \textcolor{stringliteral}{"first\_name"},
                    \textcolor{stringliteral}{"operator"} => \textcolor{stringliteral}{"LIKE"},
                    \textcolor{stringliteral}{"value"} => \textcolor{stringliteral}{"%a%"}
                ),
                \textcolor{stringliteral}{"AND"},
                array(
                    \textcolor{stringliteral}{"column"} => \textcolor{stringliteral}{"phone"},
                    \textcolor{stringliteral}{"operator"} => \textcolor{stringliteral}{"IS NOT NULL"}
                )
            );
            $response = $account\_users->find(
                $fields      = null,
                $filter      = $filter\_array,
                $limit       = 5,
                $limit       = null,
                $sort        = array (
                    \textcolor{stringliteral}{'first\_name'} => \textcolor{stringliteral}{'ASC'},
                    \textcolor{stringliteral}{'last\_name'} => \textcolor{stringliteral}{'ASC'}
                )
            );

        \} \textcolor{keywordflow}{catch} ( \hyperlink{classException}{Exception} $ex ) \{
            $this->fail($ex->getMessage());
        \}

        $this->assertNotNull($response);
        $this->assertEquals(200, $response->getHttpCode());
    \}
\}
\end{DoxyCodeInclude}
 